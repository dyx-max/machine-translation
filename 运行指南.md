# æœºå™¨ç¿»è¯‘é¡¹ç›®è¿è¡ŒæŒ‡å—

## ðŸ“‹ ç›®å½•
1. [çŽ¯å¢ƒè¦æ±‚](#çŽ¯å¢ƒè¦æ±‚)
2. [çŽ¯å¢ƒå‡†å¤‡](#çŽ¯å¢ƒå‡†å¤‡)
3. [ä¾èµ–å®‰è£…](#ä¾èµ–å®‰è£…)
4. [é¡¹ç›®è¿è¡Œ](#é¡¹ç›®è¿è¡Œ)
5. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
6. [éªŒè¯å®‰è£…](#éªŒè¯å®‰è£…)

---

## ðŸ”§ çŽ¯å¢ƒè¦æ±‚

### Pythonç‰ˆæœ¬
- **æŽ¨èç‰ˆæœ¬**: Python 3.10 æˆ– 3.11
- **æ³¨æ„**: Colabä½¿ç”¨Python 3.12ï¼Œæœ¬åœ°ä½¿ç”¨3.10å¯èƒ½å­˜åœ¨ç»†å¾®å·®å¼‚ï¼Œä½†æœ¬é¡¹ç›®å·²å…¼å®¹

### ç³»ç»Ÿè¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: Windows 10/11, Linux, macOS
- **å†…å­˜**: å»ºè®®è‡³å°‘8GB RAMï¼ˆè®­ç»ƒæ—¶ï¼‰
- **GPU**: å¯é€‰ï¼Œæœ‰CUDAæ”¯æŒçš„GPUå¯åŠ é€Ÿè®­ç»ƒï¼ˆæŽ¨èï¼‰

---

## ðŸš€ çŽ¯å¢ƒå‡†å¤‡

### æ­¥éª¤1: åˆ›å»ºè™šæ‹ŸçŽ¯å¢ƒï¼ˆå¼ºçƒˆæŽ¨èï¼‰

ä½¿ç”¨è™šæ‹ŸçŽ¯å¢ƒå¯ä»¥é¿å…ä¾èµ–å†²çªï¼Œä¿æŒé¡¹ç›®çŽ¯å¢ƒå¹²å‡€ã€‚

#### Windowsç³»ç»Ÿï¼š
```powershell
# è¿›å…¥é¡¹ç›®ç›®å½•
cd D:\æœºå™¨ç¿»è¯‘

# åˆ›å»ºè™šæ‹ŸçŽ¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹ŸçŽ¯å¢ƒ
venv\Scripts\activate
```

#### Linux/macOSç³»ç»Ÿï¼š
```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /path/to/æœºå™¨ç¿»è¯‘

# åˆ›å»ºè™šæ‹ŸçŽ¯å¢ƒ
python3 -m venv venv

# æ¿€æ´»è™šæ‹ŸçŽ¯å¢ƒ
source venv/bin/activate
```

**æ¿€æ´»æˆåŠŸåŽï¼Œå‘½ä»¤è¡Œå‰ä¼šæ˜¾ç¤º `(venv)`**

### æ­¥éª¤2: å‡çº§pip

```bash
python -m pip install --upgrade pip
```

---

## ðŸ“¦ ä¾èµ–å®‰è£…

### æ–¹å¼ä¸€ï¼šä½¿ç”¨requirements.txtï¼ˆæŽ¨èï¼‰

é¦–å…ˆåˆ›å»º `requirements.txt` æ–‡ä»¶ï¼Œç„¶åŽæ‰¹é‡å®‰è£…ï¼š

```bash
pip install -r requirements.txt
```

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨å®‰è£…ï¼ˆå‚è€ƒColabå‘½ä»¤ï¼‰

**âš ï¸ æ³¨æ„**: Colabä½¿ç”¨numpy 2.0.0ï¼Œä½†è¯¥ç‰ˆæœ¬å¯¹Python 3.10å¯èƒ½å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ã€‚
**å»ºè®®**: ä½¿ç”¨numpy 1.24.xæˆ–1.26.xç‰ˆæœ¬ï¼ˆå…¼å®¹Python 3.10ï¼‰

```bash
# å‡çº§pip
python -m pip install --upgrade pip

# å®‰è£…numpyï¼ˆä½¿ç”¨å…¼å®¹ç‰ˆæœ¬ï¼‰
pip install "numpy>=1.24.0,<2.0.0"

# å®‰è£…æ ¸å¿ƒä¾èµ–
pip install datasets sentencepiece sacrebleu nltk pyter3 tqdm spacy --upgrade

# å®‰è£…PyTorchï¼ˆæ ¹æ®ä½ çš„CUDAç‰ˆæœ¬é€‰æ‹©ï¼‰
# CPUç‰ˆæœ¬ï¼š
pip install torch torchvision torchaudio

# CUDA 11.8ç‰ˆæœ¬ï¼š
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118

# CUDA 12.1ç‰ˆæœ¬ï¼š
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121
```

### æ­¥éª¤3: ä¸‹è½½spaCyè¯­è¨€æ¨¡åž‹

spaCyæ¨¡åž‹ç”¨äºŽä¾å­˜åˆ†æžï¼Œå¿…é¡»ä¸‹è½½ï¼š

```bash
# ä¸‹è½½ä¸­æ–‡æ¨¡åž‹
python -m spacy download zh_core_web_sm

# ä¸‹è½½è‹±æ–‡æ¨¡åž‹
python -m spacy download en_core_web_sm
```

**éªŒè¯æ¨¡åž‹æ˜¯å¦ä¸‹è½½æˆåŠŸ**ï¼š
```python
import spacy
nlp_zh = spacy.load("zh_core_web_sm")
nlp_en = spacy.load("en_core_web_sm")
print("spaCyæ¨¡åž‹åŠ è½½æˆåŠŸï¼")
```

### æ­¥éª¤4: ä¸‹è½½NLTKæ•°æ®

NLTKéœ€è¦ä¸‹è½½ä¸€äº›æ•°æ®æ–‡ä»¶ï¼š

```python
import nltk
nltk.download('wordnet')
nltk.download('punkt')
```

æˆ–è€…è¿è¡ŒPythonè„šæœ¬ï¼š
```bash
python -c "import nltk; nltk.download('wordnet'); nltk.download('punkt')"
```

---

## ðŸƒ é¡¹ç›®è¿è¡Œ

### 1. æ£€æŸ¥é¡¹ç›®ç»“æž„

ç¡®ä¿é¡¹ç›®ç»“æž„å®Œæ•´ï¼š
```
æœºå™¨ç¿»è¯‘/
â”œâ”€â”€ train.py
â”œâ”€â”€ config.py
â”œâ”€â”€ models/
â”œâ”€â”€ data/
â”œâ”€â”€ training/
â””â”€â”€ utils/
```

### 2. è¿è¡Œè®­ç»ƒè„šæœ¬

```bash
python train.py
```

### 3. è¿è¡Œæµç¨‹è¯´æ˜Ž

è®­ç»ƒè„šæœ¬ä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. **åŠ è½½æ•°æ®é›†**: ä»ŽHuggingFaceä¸‹è½½WMT17ä¸­è‹±æ•°æ®é›†
2. **å‡†å¤‡è¯­æ–™**: ç”Ÿæˆè®­ç»ƒè¯­æ–™æ–‡ä»¶ï¼ˆå¦‚æžœä¸å­˜åœ¨ï¼‰
3. **è®­ç»ƒåˆ†è¯å™¨**: è®­ç»ƒæˆ–åŠ è½½SentencePieceæ¨¡åž‹
4. **åˆ›å»ºæ•°æ®åŠ è½½å™¨**: å‡†å¤‡è®­ç»ƒå’ŒéªŒè¯æ•°æ®
5. **åˆå§‹åŒ–æ¨¡åž‹**: åˆ›å»ºTransformer+GCNæ¨¡åž‹
6. **å¼€å§‹è®­ç»ƒ**: æ‰§è¡Œè®­ç»ƒå¾ªçŽ¯ï¼Œæ¯ä¸ªepochåŽéªŒè¯

### 4. è®­ç»ƒè¾“å‡ºç¤ºä¾‹

```
ä½¿ç”¨è®¾å¤‡: cuda
åŠ è½½æ•°æ®é›†...
ç”Ÿæˆè¯­æ–™æ–‡ä»¶: zh.txt, en.txt
åŠ è½½/è®­ç»ƒSentencePieceæ¨¡åž‹...
åˆ›å»ºæ•°æ®åŠ è½½å™¨...
åˆ›å»ºæ¨¡åž‹...
å¼€å§‹è®­ç»ƒ...
Epoch 01: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1562/1562 [10:30<00:00, loss: 5.234]
Epoch 1 average loss: 5.234
--------------------------------------------------------------------------------
SOURCE:    è¿™æ˜¯æºæ–‡æœ¬
TARGET:    This is target text
PREDICTED: This is predicted text
Validation average loss: 4.876
...
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: numpyç‰ˆæœ¬å†²çª

**é—®é¢˜**: `numpy 2.0.0` åœ¨Python 3.10ä¸Šå¯èƒ½ä¸å…¼å®¹

**è§£å†³æ–¹æ¡ˆ**:
```bash
pip install "numpy>=1.24.0,<2.0.0"
```

### Q2: spaCyæ¨¡åž‹ä¸‹è½½å¤±è´¥

**é—®é¢˜**: `python -m spacy download zh_core_web_sm` å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ–¹æ³•1: ä½¿ç”¨å›½å†…é•œåƒ
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple zh_core_web_sm

# æ–¹æ³•2: æ‰‹åŠ¨ä¸‹è½½
# è®¿é—® https://github.com/explosion/spacy-models/releases
# ä¸‹è½½å¯¹åº”ç‰ˆæœ¬ï¼Œç„¶åŽï¼š
pip install zh_core_web_sm-3.x.x-py3-none-any.whl
```

### Q3: CUDAä¸å¯ç”¨

**é—®é¢˜**: æœ‰GPUä½†æ˜¾ç¤ºä½¿ç”¨CPU

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥CUDAæ˜¯å¦å®‰è£…
python -c "import torch; print(torch.cuda.is_available())"

# å¦‚æžœè¿”å›žFalseï¼Œéœ€è¦å®‰è£…CUDAç‰ˆæœ¬çš„PyTorch
# è®¿é—® https://pytorch.org/ èŽ·å–å®‰è£…å‘½ä»¤
```

### Q4: å†…å­˜ä¸è¶³

**é—®é¢˜**: è®­ç»ƒæ—¶å†…å­˜æº¢å‡º

**è§£å†³æ–¹æ¡ˆ**:
- å‡å° `batch_size`ï¼ˆåœ¨ `config.py` ä¸­ä¿®æ”¹ï¼‰
- å‡å° `train_size`ï¼ˆä½¿ç”¨æ›´å°‘çš„è®­ç»ƒæ•°æ®ï¼‰
- å‡å° `max_src_len` å’Œ `max_tgt_len`

### Q5: æ•°æ®é›†ä¸‹è½½æ…¢

**é—®é¢˜**: HuggingFaceæ•°æ®é›†ä¸‹è½½å¾ˆæ…¢

**è§£å†³æ–¹æ¡ˆ**:
```bash
# è®¾ç½®é•œåƒï¼ˆLinux/macOSï¼‰
export HF_ENDPOINT=https://hf-mirror.com

# Windows PowerShell
$env:HF_ENDPOINT="https://hf-mirror.com"

# æˆ–è€…åœ¨ä»£ç ä¸­è®¾ç½®
import os
os.environ['HF_ENDPOINT'] = 'https://hf-mirror.com'
```

### Q6: æ¨¡å—å¯¼å…¥é”™è¯¯

**é—®é¢˜**: `ModuleNotFoundError: No module named 'models'`

**è§£å†³æ–¹æ¡ˆ**:
- ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œè„šæœ¬
- æ£€æŸ¥æ˜¯å¦æœ‰ `__init__.py` æ–‡ä»¶
- ç¡®ä¿è™šæ‹ŸçŽ¯å¢ƒå·²æ¿€æ´»

---

## âœ… éªŒè¯å®‰è£…

è¿è¡Œä»¥ä¸‹Pythonè„šæœ¬éªŒè¯æ‰€æœ‰ä¾èµ–æ˜¯å¦æ­£ç¡®å®‰è£…ï¼š

```python
# test_installation.py
print("=" * 50)
print("æ£€æŸ¥ä¾èµ–å®‰è£…...")
print("=" * 50)

# æ£€æŸ¥Pythonç‰ˆæœ¬
import sys
print(f"âœ“ Pythonç‰ˆæœ¬: {sys.version}")

# æ£€æŸ¥PyTorch
try:
    import torch
    print(f"âœ“ PyTorchç‰ˆæœ¬: {torch.__version__}")
    print(f"âœ“ CUDAå¯ç”¨: {torch.cuda.is_available()}")
    if torch.cuda.is_available():
        print(f"âœ“ CUDAç‰ˆæœ¬: {torch.version.cuda}")
except ImportError:
    print("âœ— PyTorchæœªå®‰è£…")

# æ£€æŸ¥å…¶ä»–ä¾èµ–
dependencies = [
    'datasets', 'sentencepiece', 'sacrebleu', 
    'nltk', 'tqdm', 'spacy', 'numpy'
]

for dep in dependencies:
    try:
        mod = __import__(dep)
        version = getattr(mod, '__version__', 'æœªçŸ¥')
        print(f"âœ“ {dep}: {version}")
    except ImportError:
        print(f"âœ— {dep}: æœªå®‰è£…")

# æ£€æŸ¥spaCyæ¨¡åž‹
try:
    import spacy
    nlp_zh = spacy.load("zh_core_web_sm")
    nlp_en = spacy.load("en_core_web_sm")
    print("âœ“ spaCyä¸­æ–‡æ¨¡åž‹: å·²åŠ è½½")
    print("âœ“ spaCyè‹±æ–‡æ¨¡åž‹: å·²åŠ è½½")
except Exception as e:
    print(f"âœ— spaCyæ¨¡åž‹: {e}")

# æ£€æŸ¥NLTKæ•°æ®
try:
    import nltk
    nltk.data.find('tokenizers/punkt')
    nltk.data.find('corpora/wordnet')
    print("âœ“ NLTKæ•°æ®: å·²ä¸‹è½½")
except LookupError:
    print("âœ— NLTKæ•°æ®: æœªä¸‹è½½ï¼ˆè¿è¡Œ nltk.download()ï¼‰")

# æ£€æŸ¥é¡¹ç›®æ¨¡å—
try:
    from models.model import TransformerGCN
    from data.dataset import WMTDataset
    from training.trainer import Trainer
    print("âœ“ é¡¹ç›®æ¨¡å—: å¯¼å…¥æˆåŠŸ")
except Exception as e:
    print(f"âœ— é¡¹ç›®æ¨¡å—: {e}")

print("=" * 50)
print("æ£€æŸ¥å®Œæˆï¼")
print("=" * 50)
```

ä¿å­˜ä¸º `test_installation.py` å¹¶è¿è¡Œï¼š
```bash
python test_installation.py
```

---

## ðŸ“ å®Œæ•´å®‰è£…å‘½ä»¤ï¼ˆWindows PowerShellï¼‰

```powershell
# 1. åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹ŸçŽ¯å¢ƒ
python -m venv venv
venv\Scripts\activate

# 2. å‡çº§pip
python -m pip install --upgrade pip

# 3. å®‰è£…ä¾èµ–
pip install "numpy>=1.24.0,<2.0.0"
pip install datasets sentencepiece sacrebleu nltk pyter3 tqdm spacy --upgrade
pip install torch torchvision torchaudio

# 4. ä¸‹è½½spaCyæ¨¡åž‹
python -m spacy download zh_core_web_sm
python -m spacy download en_core_web_sm

# 5. ä¸‹è½½NLTKæ•°æ®
python -c "import nltk; nltk.download('wordnet'); nltk.download('punkt')"

# 6. éªŒè¯å®‰è£…
python test_installation.py

# 7. è¿è¡Œè®­ç»ƒ
python train.py
```

---

## ðŸŽ¯ å¿«é€Ÿå¼€å§‹ï¼ˆä¸€é”®è„šæœ¬ï¼‰

åˆ›å»º `setup.bat` (Windows) æˆ– `setup.sh` (Linux/macOS) è‡ªåŠ¨æ‰§è¡Œå®‰è£…ï¼š

**Windows (setup.bat)**:
```batch
@echo off
echo åˆ›å»ºè™šæ‹ŸçŽ¯å¢ƒ...
python -m venv venv
call venv\Scripts\activate.bat

echo å‡çº§pip...
python -m pip install --upgrade pip

echo å®‰è£…ä¾èµ–...
pip install "numpy>=1.24.0,<2.0.0"
pip install datasets sentencepiece sacrebleu nltk pyter3 tqdm spacy --upgrade
pip install torch torchvision torchaudio

echo ä¸‹è½½spaCyæ¨¡åž‹...
python -m spacy download zh_core_web_sm
python -m spacy download en_core_web_sm

echo ä¸‹è½½NLTKæ•°æ®...
python -c "import nltk; nltk.download('wordnet'); nltk.download('punkt')"

echo å®‰è£…å®Œæˆï¼
pause
```

è¿è¡Œï¼šåŒå‡» `setup.bat` æˆ–åœ¨å‘½ä»¤è¡Œæ‰§è¡Œ `setup.bat`

---

## ðŸ“š å‚è€ƒèµ„æº

- [PyTorchå®˜æ–¹æ–‡æ¡£](https://pytorch.org/)
- [spaCyæ–‡æ¡£](https://spacy.io/)
- [HuggingFace Datasets](https://huggingface.co/docs/datasets/)
- [SentencePieceæ–‡æ¡£](https://github.com/google/sentencepiece)

---

## ðŸ’¡ æç¤º

1. **é¦–æ¬¡è¿è¡Œ**: é¦–æ¬¡è¿è¡Œä¼šä¸‹è½½æ•°æ®é›†å’Œæ¨¡åž‹ï¼Œå¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´
2. **GPUåŠ é€Ÿ**: å¦‚æžœæœ‰GPUï¼Œè®­ç»ƒé€Ÿåº¦ä¼šæ˜¾è‘—æå‡
3. **ä¿å­˜æ£€æŸ¥ç‚¹**: å»ºè®®å®šæœŸä¿å­˜æ¨¡åž‹æ£€æŸ¥ç‚¹ï¼Œé¿å…è®­ç»ƒä¸­æ–­ä¸¢å¤±è¿›åº¦
4. **ç›‘æŽ§èµ„æº**: è®­ç»ƒæ—¶æ³¨æ„ç›‘æŽ§GPU/CPUå’Œå†…å­˜ä½¿ç”¨æƒ…å†µ

---

**ç¥è®­ç»ƒé¡ºåˆ©ï¼å¦‚æœ‰é—®é¢˜ï¼Œè¯·å‚è€ƒå¸¸è§é—®é¢˜éƒ¨åˆ†æˆ–æŸ¥çœ‹é¡¹ç›®README.md**

